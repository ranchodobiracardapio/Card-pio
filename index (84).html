<html lang="pt-BR">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1" name="viewport"/>
  <title>
   Fúria das Ruas - Venda de Camisetas
  </title>
  <script src="https://cdn.tailwindcss.com">
  </script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&amp;display=swap" rel="stylesheet"/>
  <style>
   body {
      font-family: "Inter", sans-serif;
      background-color: #f8fafc;
      padding-bottom: 6rem;
      transition: background-color 0.3s ease;
    }
    header {
      background-color: #1e1a14;
      padding: 1rem 1.5rem;
      border-bottom-left-radius: 3rem;
      border-bottom-right-radius: 3rem;
      color: white;
      z-index: 20;
      position: relative;
    }
    header h1 {
      font-weight: 700;
      font-size: 1.75rem;
      text-align: center;
      user-select: none;
    }
    nav {
      margin: 1rem 1rem 0 1rem;
      background: white;
      border-radius: 1rem;
      box-shadow: 0 8px 20px rgba(74, 124, 89, 0.15);
      display: flex;
      justify-content: center;
      gap: 0.5rem;
      overflow-x: auto;
      padding: 0.5rem;
      scrollbar-width: thin;
      scrollbar-color: #4a7c59 transparent;
    }
    nav::-webkit-scrollbar {
      height: 8px;
    }
    nav::-webkit-scrollbar-thumb {
      background-color: #4a7c59;
      border-radius: 4px;
    }
    nav button {
      flex-shrink: 0;
      padding: 0.5rem 1.25rem;
      font-weight: 600;
      font-size: 1rem;
      border-radius: 9999px;
      border: 2px solid transparent;
      background-color: #e6f4ea;
      color: #2563eb;
      cursor: pointer;
      transition: all 0.3s ease;
      white-space: nowrap;
    }
    nav button[aria-selected="true"] {
      background-color: #2563eb;
      color: white;
      border-color: #1e40af;
      font-weight: 700;
      box-shadow: 0 0 10px rgba(37, 99, 235, 0.7);
    }
    nav button:hover:not([aria-selected="true"]),
    nav button:focus-visible:not([aria-selected="true"]) {
      background-color: #dbeafe;
      outline: none;
    }
    main {
      flex: 1;
      overflow-y: auto;
      margin: 1rem 1rem 6rem 1rem;
      max-width: 720px;
      width: 100%;
      margin-left: auto;
      margin-right: auto;
    }
    .product-list {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 1.5rem;
    }
    .product-card {
      background: white;
      border-radius: 1rem;
      box-shadow: 0 8px 20px rgba(74, 124, 89, 0.15);
      display: flex;
      flex-direction: column;
      cursor: default;
      transition: transform 0.2s ease;
      user-select: none;
    }
    .product-card:focus,
    .product-card:hover {
      transform: scale(1.05);
      outline: none;
      box-shadow: 0 0 15px rgba(37, 99, 235, 0.7);
      z-index: 10;
      position: relative;
    }
    .product-card img {
      width: 100%;
      height: 220px;
      object-fit: contain;
      border-top-left-radius: 1rem;
      border-top-right-radius: 1rem;
      background: white;
    }
    .product-content {
      padding: 1rem 1.25rem 1.5rem 1.25rem;
      flex: 1;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }
    .product-name {
      font-weight: 700;
      font-size: 1.25rem;
      color: #2563eb;
      margin-bottom: 0.5rem;
      text-align: center;
    }
    .product-description {
      font-size: 0.9rem;
      color: #4a7c59;
      white-space: pre-line;
      margin-bottom: 1rem;
      text-align: center;
      min-height: 3.5rem;
    }
    .product-price {
      font-weight: 700;
      font-size: 1.25rem;
      color: #16a34a;
      margin-bottom: 1rem;
      text-align: center;
    }
    .product-button {
      background-color: #2563eb;
      color: white;
      font-weight: 600;
      padding: 0.5rem 1.5rem;
      border-radius: 9999px;
      cursor: pointer;
      border: none;
      font-size: 1rem;
      transition: background-color 0.3s ease;
      display: block;
      width: 100%;
      text-align: center;
      user-select: none;
    }
    .product-button:hover,
    .product-button:focus {
      background-color: #1e40af;
      outline: none;
      box-shadow: 0 0 8px rgba(37, 99, 235, 0.7);
    }
    /* Cart panel */
    aside#cart-panel {
      background-color: #ffffff;
      position: fixed;
      top: 0;
      right: 0;
      height: 100%;
      width: 90vw;
      max-width: 400px;
      box-shadow: -4px 0 20px rgba(74, 124, 89, 0.3);
      transform: translateX(100%);
      transition: transform 0.3s ease;
      z-index: 50;
      display: flex;
      flex-direction: column;
      border-left: 4px solid #2563eb;
      border-radius: 1rem 0 0 1rem;
    }
    aside#cart-panel.open {
      transform: translateX(0);
    }
    aside#cart-panel header {
      padding: 1rem 1.5rem;
      border-bottom: 1px solid #4a7c59;
      display: flex;
      justify-content: space-between;
      align-items: center;
      color: #2563eb;
      font-weight: 700;
      font-size: 1.25rem;
    }
    aside#cart-panel header button {
      background: none;
      border: none;
      color: #2563eb;
      font-size: 1.5rem;
      cursor: pointer;
      transition: color 0.3s ease;
    }
    aside#cart-panel header button:hover,
    aside#cart-panel header button:focus {
      color: #1e40af;
      outline: none;
    }
    #cart-list {
      flex: 1;
      overflow-y: auto;
      padding: 1rem 1.5rem;
      border-bottom: 1px solid #4a7c59;
    }
    #cart-list li {
      display: flex;
      align-items: center;
      gap: 1rem;
      border-bottom: 1px solid #d1d5db;
      padding: 0.75rem 0;
    }
    #cart-list li img {
      width: 60px;
      height: 60px;
      object-fit: contain;
      border-radius: 0.5rem;
      background: white;
      flex-shrink: 0;
      box-shadow: 0 0 8px rgba(74, 124, 89, 0.2);
    }
    #cart-list li .info {
      flex: 1;
    }
    #cart-list li .info h4 {
      font-weight: 600;
      color: #2563eb;
      font-size: 1rem;
      margin-bottom: 0.25rem;
    }
    #cart-list li .info p {
      font-weight: 700;
      color: #16a34a;
      font-size: 0.95rem;
    }
    #cart-list li .qty-controls {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    #cart-list li .qty-controls button {
      background-color: #e6f4ea;
      border: none;
      color: #2563eb;
      font-weight: 700;
      font-size: 1.25rem;
      width: 28px;
      height: 28px;
      border-radius: 9999px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background-color 0.3s ease;
      user-select: none;
    }
    #cart-list li .qty-controls button:hover,
    #cart-list li .qty-controls button:focus {
      background-color: #c7e6c9;
      outline: none;
    }
    #cart-list li .qty-controls span {
      min-width: 24px;
      text-align: center;
      font-weight: 700;
      color: #2563eb;
      user-select: none;
    }
    #cart-list li .qty-controls .remove-btn {
      color: #dc2626;
      font-size: 1.2rem;
      background: none;
      border: none;
      cursor: pointer;
      transition: color 0.3s ease;
      user-select: none;
    }
    #cart-list li .qty-controls .remove-btn:hover,
    #cart-list li .qty-controls .remove-btn:focus {
      color: #991b1b;
      outline: none;
    }
    #address-container {
      padding: 1rem 1.5rem;
      border-top: 1px solid #4a7c59;
      color: #2563eb;
      font-weight: 600;
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
    }
    #address-container label {
      font-weight: 600;
      color: #2563eb;
    }
    #address-container input,
    #address-container textarea {
      width: 100%;
      padding: 0.5rem 0.75rem;
      border: 1px solid #2563eb;
      border-radius: 0.375rem;
      color: #2563eb;
      font-size: 1rem;
      font-family: inherit;
      resize: vertical;
    }
    #address-container input:focus,
    #address-container textarea:focus {
      outline: none;
      border-color: #1e40af;
      box-shadow: 0 0 0 2px rgba(37, 99, 235, 0.5);
    }
    aside#cart-panel footer {
      padding: 1rem 1.5rem;
      border-top: 1px solid #4a7c59;
    }
    #cart-total {
      font-weight: 700;
      font-size: 1.5rem;
      color: #16a34a;
      text-align: center;
      margin-bottom: 1rem;
      user-select: none;
    }
    #cart-buy-btn {
      background-color: #2563eb;
      color: white;
      font-weight: 700;
      padding: 0.75rem 1rem;
      border-radius: 9999px;
      width: 100%;
      cursor: pointer;
      font-size: 1.125rem;
      transition: background-color 0.3s ease;
      user-select: none;
    }
    #cart-buy-btn:disabled {
      background-color: #a5b4fc;
      cursor: not-allowed;
      box-shadow: none;
      opacity: 0.6;
    }
    #cart-buy-btn:not(:disabled):hover,
    #cart-buy-btn:not(:disabled):focus {
      background-color: #1e40af;
      outline: none;
      box-shadow: 0 0 12px rgba(37, 99, 235, 0.8);
    }
    /* Cart preview bar */
    #cart-preview {
      position: fixed;
      bottom: 4rem;
      left: 0;
      right: 0;
      background: #2563eb;
      color: white;
      padding: 0.75rem 1.5rem;
      display: none;
      justify-content: space-between;
      align-items: center;
      font-weight: 700;
      font-size: 1rem;
      z-index: 60;
      box-shadow: 0 -2px 8px rgba(0, 0, 0, 0.15);
      border-top-left-radius: 1rem;
      border-top-right-radius: 1rem;
      max-width: 720px;
      margin-left: auto;
      margin-right: auto;
    }
    #cart-preview.show {
      display: flex;
    }
    #cart-preview .left {
      display: flex;
      align-items: center;
      gap: 1rem;
    }
    #cart-preview .left i {
      font-size: 1.5rem;
    }
    #cart-preview button {
      background-color: #facc15;
      color: #1e40af;
      font-weight: 700;
      padding: 0.5rem 1.25rem;
      border-radius: 9999px;
      cursor: pointer;
      border: none;
      font-size: 1rem;
      transition: background-color 0.3s ease;
      user-select: none;
    }
    #cart-preview button:hover,
    #cart-preview button:focus {
      background-color: #eab308;
      outline: none;
    }
    #cart-clear-small-btn {
      background-color: #dc2626;
      color: white;
      padding: 0.25rem 0.75rem;
      border-radius: 0.375rem;
      font-weight: 600;
      font-size: 0.75rem;
      cursor: pointer;
      border: none;
      transition: background-color 0.3s ease;
      margin-left: 0.5rem;
      user-select: none;
    }
    #cart-clear-small-btn:hover {
      background-color: #b91c1c;
    }
    /* Form inputs for customization */
    .form-section {
      background: white;
      border-radius: 1rem;
      box-shadow: 0 8px 20px rgba(74, 124, 89, 0.15);
      padding: 1.5rem 2rem;
      margin-bottom: 2rem;
      max-width: 720px;
      margin-left: auto;
      margin-right: auto;
    }
    .form-section h2 {
      font-weight: 700;
      font-size: 1.5rem;
      color: #2563eb;
      margin-bottom: 1rem;
      user-select: none;
      text-align: center;
    }
    .form-group {
      margin-bottom: 1.25rem;
    }
    label {
      display: block;
      font-weight: 600;
      color: #2563eb;
      margin-bottom: 0.5rem;
      user-select: none;
    }
    select,
    input[type="text"],
    input[type="number"] {
      width: 100%;
      padding: 0.5rem 0.75rem;
      border: 2px solid #2563eb;
      border-radius: 0.5rem;
      font-size: 1rem;
      color: #2563eb;
      font-family: inherit;
      transition: border-color 0.3s ease;
      user-select: text;
    }
    select:focus,
    input[type="text"]:focus,
    input[type="number"]:focus {
      outline: none;
      border-color: #1e40af;
      box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.4);
    }
    /* Radio buttons for model selection */
    .model-options {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      justify-content: center;
    }
    .model-option {
      flex: 1 1 120px;
      max-width: 160px;
      background: #e6f4ea;
      border-radius: 1rem;
      padding: 1rem;
      cursor: pointer;
      border: 2px solid transparent;
      text-align: center;
      transition: border-color 0.3s ease, background-color 0.3s ease;
      user-select: none;
    }
    .model-option input[type="radio"] {
      display: none;
    }
    .model-option label {
      cursor: pointer;
      display: block;
      font-weight: 600;
      color: #2563eb;
      margin-top: 0.5rem;
      user-select: none;
    }
    .model-option img {
      width: 100%;
      height: 140px;
      object-fit: contain;
      border-radius: 1rem;
      background: white;
      box-shadow: 0 0 10px rgba(74, 124, 89, 0.2);
      user-select: none;
    }
    .model-option input[type="radio"]:checked + label {
      color: #1e40af;
      font-weight: 700;
    }
    .model-option input[type="radio"]:checked {
      outline: none;
    }
    .model-option input[type="radio"]:checked ~ .model-option {
      border-color: #2563eb;
      background-color: #dbeafe;
    }
    /* Sizes table */
    .sizes-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 0.5rem;
      user-select: none;
    }
    .sizes-table th,
    .sizes-table td {
      border: 1px solid #2563eb;
      padding: 0.5rem 0.75rem;
      text-align: center;
      font-weight: 600;
      color: #2563eb;
      font-size: 0.9rem;
    }
    .sizes-table th {
      background-color: #dbeafe;
    }
    /* Responsive adjustments */
    @media (max-width: 640px) {
      nav {
        padding: 0.5rem 0.25rem;
      }
      nav button {
        padding: 0.5rem 1rem;
        font-size: 0.9rem;
      }
      .product-card img {
        height: 180px;
      }
      .model-option {
        max-width: 140px;
      }
      .model-option img {
        height: 120px;
      }
      #cart-panel {
        width: 100vw;
        max-width: 100vw;
        border-radius: 0;
      }
      main {
        margin: 1rem 0.5rem 6rem 0.5rem;
      }
      .form-section {
        padding: 1rem 1rem;
        margin: 1rem 0.5rem 2rem 0.5rem;
      }
      #cart-preview {
        max-width: 100vw;
        border-radius: 0;
        bottom: 3.5rem;
        padding: 0.75rem 1rem;
      }
    }
  </style>
 </head>
 <body class="min-h-screen flex flex-col relative">
  <header>
   <h1>
    Fúria das Ruas - Camisetas Oficiais
   </h1>
  </header>
  <nav aria-label="Categorias de camisetas" role="tablist">
   <button aria-selected="true" data-category="adulto" role="tab" tabindex="0" type="button">
    Adulto
   </button>
   <button aria-selected="false" data-category="infantil" role="tab" tabindex="-1" type="button">
    Infantil
   </button>
  </nav>
  <main aria-label="Lista de camisetas disponíveis" aria-live="polite" id="product-list" role="list">
   <!-- Products will be rendered here -->
  </main>
  <section aria-label="Formulário de personalização e pedido" class="form-section">
   <h2>
    Personalize sua Camiseta
   </h2>
   <form id="order-form" novalidate="">
    <div class="form-group">
     <label for="model-select">
      Escolha o Modelo
     </label>
     <div aria-labelledby="model-select-label" class="model-options" id="model-select" role="radiogroup">
      <div class="model-option">
       <input checked="" id="model1" name="model" type="radio" value="Modelo Clássico"/>
       <label for="model1" tabindex="0">
        <img alt="Camiseta modelo clássico branca com logo Fúria das Ruas na frente, estilo urbano e moderno" height="140" src="https://storage.googleapis.com/a1aa/image/2f24ee0a-b0df-4e6c-8dd5-5c1852119fb9.jpg" width="300"/>
        Modelo Clássico
       </label>
      </div>
      <div class="model-option">
       <input id="model2" name="model" type="radio" value="Modelo Street"/>
       <label for="model2" tabindex="0">
        <img alt="Camiseta modelo street preta com estampa grande da equipe Fúria das Ruas nas costas, estilo grafite" height="140" src="https://storage.googleapis.com/a1aa/image/f1defe46-b954-40ea-aac7-a87f70665865.jpg" width="300"/>
        Modelo Street
       </label>
      </div>
      <div class="model-option">
       <input id="model3" name="model" type="radio" value="Modelo Slim"/>
       <label for="model3" tabindex="0">
        <img alt="Camiseta modelo slim cinza com logo pequeno da equipe Fúria das Ruas no peito esquerdo, estilo ajustado" height="140" src="https://storage.googleapis.com/a1aa/image/3d2824e3-8b9e-48a3-1cae-98ba7bf0f690.jpg" width="300"/>
        Modelo Slim
       </label>
      </div>
     </div>
    </div>
    <div class="form-group">
     <label for="size-select">
      Escolha o Tamanho
     </label>
     <select aria-describedby="size-desc" aria-required="true" id="size-select" name="size" required="">
      <!-- Sizes will be populated dynamically -->
     </select>
     <p class="text-sm text-green-700 mt-1" id="size-desc">
      Consulte as medidas abaixo para escolher o tamanho ideal.
     </p>
    </div>
    <div class="form-group">
     <label for="name-input">
      Nome (opcional)
     </label>
     <input autocomplete="off" id="name-input" name="name" placeholder="Digite seu nome para personalizar" type="text"/>
    </div>
    <div class="form-group">
     <label for="quantity-input">
      Quantidade
     </label>
     <input aria-required="true" id="quantity-input" max="10" min="1" name="quantity" required="" type="number" value="1"/>
    </div>
    <button aria-label="Adicionar camiseta ao carrinho" class="product-button" id="add-to-cart-btn" type="submit">
     Adicionar ao Carrinho
    </button>
   </form>
  </section>
  <aside aria-hidden="true" aria-label="Carrinho de compras" aria-modal="true" id="cart-panel" role="dialog" tabindex="-1">
   <header>
    <h3>
     Carrinho
    </h3>
    <button aria-label="Fechar carrinho" id="cart-close-btn" type="button">
     <i class="fas fa-times">
     </i>
    </button>
   </header>
   <ul aria-label="Itens no carrinho" aria-live="polite" id="cart-list" tabindex="0">
   </ul>
   <div id="address-container">
    <label for="input-rua">
     Endereço para Entrega
    </label>
    <input aria-label="Endereço para entrega" autocomplete="street-address" id="input-rua" placeholder="Rua e número" type="text"/>
    <label for="input-contato">
     Contato (Telefone)
    </label>
    <input aria-label="Telefone para contato" autocomplete="tel" id="input-contato" inputmode="numeric" pattern="[0-9]{11}" placeholder="Ex: 67992321321" type="tel"/>
    <label for="input-observacoes">
     Observações (opcional)
    </label>
    <textarea aria-label="Observações para o pedido" id="input-observacoes" placeholder="Digite aqui suas observações" rows="3"></textarea>
   </div>
   <footer>
    <div aria-atomic="true" aria-live="polite" id="cart-total">
     R$ 0,00
    </div>
    <button disabled="" id="cart-buy-btn" type="button">
     Finalizar Compra
    </button>
   </footer>
  </aside>
  <div aria-label="Resumo do carrinho" aria-live="polite" id="cart-preview" role="region">
   <div class="left">
    <i class="fas fa-shopping-bag">
    </i>
    <span id="cart-preview-qty">
     0 itens
    </span>
    <span id="cart-preview-total">
     R$ 0,00
    </span>
    <button aria-label="Limpar carrinho" id="cart-clear-small-btn" type="button">
     Limpar
    </button>
   </div>
   <button aria-label="Ver sacola" id="cart-preview-button" type="button">
    Ver sacola
   </button>
  </div>
  <div aria-live="polite" id="splash-art" role="alert" style="display:none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(0); background: rgba(255,255,255,0.95); border-radius: 1rem; padding: 2rem; box-shadow: 0 10px 25px rgba(0,0,0,0.2); z-index: 100; flex-direction: column; align-items: center; justify-content: center; pointer-events: none; opacity: 0; transition: opacity 0.3s ease, transform 0.3s ease;">
   <img alt="Logo estilizado da equipe Fúria das Ruas em fundo branco com bordas arredondadas" height="80" src="https://storage.googleapis.com/a1aa/image/aa0af40b-0829-4aa7-f42e-0b901bdc7272.jpg" style="border-radius: 0.5rem; box-shadow: 0 0 15px rgba(74, 124, 89, 0.7); background: white; animation: spin 2s linear infinite;" width="80"/>
   <p style="font-weight: 600; color: #3e6b45; font-size: 1.25rem; text-align: center; margin-top: 1rem;">
    Adicionando ao carrinho...
   </p>
  </div>
  <div aria-live="assertive" id="sending-overlay" role="alertdialog" style="display:none; position: fixed; inset: 0; background: rgba(0,0,0,0.5); z-index: 110; display: flex; flex-direction: column; align-items: center; justify-content: center; color: white; font-weight: 700; font-size: 1.5rem; border-radius: 1rem; pointer-events: none; opacity: 0; transition: opacity 0.3s ease;">
   <img alt="Logo estilizado da equipe Fúria das Ruas em fundo branco com bordas arredondadas" height="80" src="https://storage.googleapis.com/a1aa/image/aa0af40b-0829-4aa7-f42e-0b901bdc7272.jpg" style="border-radius: 0.5rem; background: white; box-shadow: 0 0 15px rgba(255, 255, 255, 0.7); margin-bottom: 1rem; animation: spin 2s linear infinite;" width="80"/>
   <span>
    Pedido sendo enviado...
   </span>
  </div>
  <script>
   document.addEventListener("DOMContentLoaded", function () {
      const adultSizes = [
        { size: "PP", height: 63, width: 48, price: 60 },
        { size: "P", height: 66, width: 49, price: 60 },
        { size: "M", height: 68, width: 53, price: 60 },
        { size: "G", height: 70, width: 56, price: 60 },
        { size: "GG", height: 74, width: 60, price: 60 },
        { size: "XG", height: 78, width: 64, price: 60 },
        { size: "XGG", height: 79, width: 67, price: 60 },
        { size: "S1", height: 81, width: 76, price: 60 },
      ];
      const infantSizes = [
        { size: "6M", age: "6 meses", height: null, width: null, price: 50 },
        { size: "T1", age: "1 ano", height: 37, width: 29, price: 50 },
        { size: "T2", age: "2 anos", height: 38, width: 30, price: 50 },
        { size: "T4", age: "4 anos", height: 44, width: 34, price: 50 },
        { size: "T6", age: "6 anos", height: 48, width: 37, price: 50 },
        { size: "T8", age: "8 anos", height: 51, width: 38, price: 50 },
        { size: "T10", age: "10 anos", height: 52, width: 40, price: 50 },
        { size: "T12", age: "12 anos", height: 55, width: 41, price: 50 },
        { size: "T14", age: "14 anos", height: 60, width: 43, price: 50 },
      ];

      const models = [
        {
          id: "Modelo Clássico",
          img: "https://placehold.co/300x140/png?text=Modelo+Clássico",
          alt: "Camiseta modelo clássico branca com logo Fúria das Ruas na frente, estilo urbano e moderno",
        },
        {
          id: "Modelo Street",
          img: "https://placehold.co/300x140/png?text=Modelo+Street",
          alt: "Camiseta modelo street preta com estampa grande da equipe Fúria das Ruas nas costas, estilo grafite",
        },
        {
          id: "Modelo Slim",
          img: "https://placehold.co/300x140/png?text=Modelo+Slim",
          alt: "Camiseta modelo slim cinza com logo pequeno da equipe Fúria das Ruas no peito esquerdo, estilo ajustado",
        },
      ];

      const categoryButtons = document.querySelectorAll("nav button[data-category]");
      const productList = document.getElementById("product-list");
      const sizeSelect = document.getElementById("size-select");
      const orderForm = document.getElementById("order-form");
      const addToCartBtn = document.getElementById("add-to-cart-btn");
      const cartPanel = document.getElementById("cart-panel");
      const cartCloseBtn = document.getElementById("cart-close-btn");
      const cartList = document.getElementById("cart-list");
      const cartTotal = document.getElementById("cart-total");
      const cartBuyBtn = document.getElementById("cart-buy-btn");
      const cartPreview = document.getElementById("cart-preview");
      const cartPreviewQty = document.getElementById("cart-preview-qty");
      const cartPreviewTotal = document.getElementById("cart-preview-total");
      const cartPreviewButton = document.getElementById("cart-preview-button");
      const cartClearSmallBtn = document.getElementById("cart-clear-small-btn");
      const splashArt = document.getElementById("splash-art");
      const sendingOverlay = document.getElementById("sending-overlay");

      let cart = [];

      // Accessibility: manage tab focus for category buttons
      function setCategoryFocus(selectedBtn) {
        categoryButtons.forEach((btn) => {
          if (btn === selectedBtn) {
            btn.setAttribute("aria-selected", "true");
            btn.tabIndex = 0;
          } else {
            btn.setAttribute("aria-selected", "false");
            btn.tabIndex = -1;
          }
        });
      }

      // Render sizes in select based on category
      function renderSizes(category) {
        sizeSelect.innerHTML = "";
        let sizes = category === "adulto" ? adultSizes : infantSizes;
        sizes.forEach((sz) => {
          let optionText = "";
          if (category === "adulto") {
            optionText = `${sz.size} - Altura: ${sz.height}cm, Largura: ${sz.width}cm - R$ ${sz.price},00`;
          } else {
            optionText = `${sz.size} - Idade: ${sz.age}${sz.height && sz.width ? `, Altura: ${sz.height}cm, Largura: ${sz.width}cm` : ""} - R$ ${sz.price},00`;
          }
          const option = document.createElement("option");
          option.value = sz.size;
          option.textContent = optionText;
          option.dataset.price = sz.price;
          sizeSelect.appendChild(option);
        });
      }

      // Render products (models) for selection
      function renderModels() {
        const modelContainer = document.getElementById("model-select");
        if (!modelContainer) return;
        // Already rendered in HTML, no need to re-render here
      }

      // Render product list (empty, as we use form for selection)
      function renderProductList() {
        productList.innerHTML = "";
        const info = document.createElement("p");
        info.className = "text-green-700 text-center font-semibold";
        info.textContent = "Escolha o modelo, tamanho, quantidade e personalize sua camiseta abaixo.";
        productList.appendChild(info);
      }

      // Format price to BRL style
      function formatPrice(price) {
        return `R$ ${price.toFixed(2).replace(".", ",")}`;
      }

      // Add item to cart
      function addToCart(item) {
        // Check if same item (model + size + name) exists
        const existingIndex = cart.findIndex(
          (c) =>
            c.model === item.model &&
            c.size === item.size &&
            c.name.toLowerCase() === item.name.toLowerCase()
        );
        if (existingIndex !== -1) {
          cart[existingIndex].quantity += item.quantity;
        } else {
          cart.push(item);
        }
        saveCart();
        renderCart();
      }

      // Save cart to localStorage
      function saveCart() {
        localStorage.setItem("furiaDasRuasCart", JSON.stringify(cart));
      }

      // Load cart from localStorage
      function loadCart() {
        const saved = localStorage.getItem("furiaDasRuasCart");
        if (saved) {
          try {
            cart = JSON.parse(saved);
          } catch {
            cart = [];
          }
        }
      }

      // Render cart items
      function renderCart() {
        cartList.innerHTML = "";
        if (cart.length === 0) {
          const emptyMsg = document.createElement("p");
          emptyMsg.className = "text-green-700 text-center py-6";
          emptyMsg.textContent = "Seu carrinho está vazio.";
          cartList.appendChild(emptyMsg);
          cartTotal.textContent = "R$ 0,00";
          cartBuyBtn.disabled = true;
          updateCartPreview();
          return;
        }

        cart.forEach((entry, index) => {
          const li = document.createElement("li");

          const img = document.createElement("img");
          const modelObj = models.find((m) => m.id === entry.model);
          img.src = modelObj ? modelObj.img : "https://placehold.co/60x60/png?text=Camisa";
          img.alt = modelObj ? modelObj.alt : "Imagem da camiseta selecionada";
          img.width = 60;
          img.height = 60;

          const infoDiv = document.createElement("div");
          infoDiv.className = "info";

          const nameH4 = document.createElement("h4");
          nameH4.textContent = `${entry.model} - Tamanho ${entry.size}`;
          infoDiv.appendChild(nameH4);

          if (entry.name.trim() !== "") {
            const nameUser = document.createElement("p");
            nameUser.textContent = `Nome: ${entry.name}`;
            nameUser.style.fontWeight = "500";
            nameUser.style.fontSize = "0.9rem";
            nameUser.style.color = "#4a7c59";
            infoDiv.appendChild(nameUser);
          }

          const priceP = document.createElement("p");
          priceP.className = "price";
          priceP.textContent = formatPrice(entry.price * entry.quantity);
          infoDiv.appendChild(priceP);

          const qtyControls = document.createElement("div");
          qtyControls.className = "qty-controls";

          const btnMinus = document.createElement("button");
          btnMinus.type = "button";
          btnMinus.setAttribute("aria-label", `Diminuir quantidade de ${entry.model} tamanho ${entry.size}`);
          btnMinus.textContent = "-";
          btnMinus.addEventListener("click", () => changeQuantity(index, -1));

          const qtySpan = document.createElement("span");
          qtySpan.textContent = entry.quantity;

          const btnPlus = document.createElement("button");
          btnPlus.type = "button";
          btnPlus.setAttribute("aria-label", `Aumentar quantidade de ${entry.model} tamanho ${entry.size}`);
          btnPlus.textContent = "+";
          btnPlus.addEventListener("click", () => changeQuantity(index, 1));

          const btnRemove = document.createElement("button");
          btnRemove.type = "button";
          btnRemove.className = "remove-btn";
          btnRemove.setAttribute("aria-label", `Remover ${entry.model} tamanho ${entry.size} do carrinho`);
          btnRemove.innerHTML = '<i class="fas fa-trash-alt"></i>';
          btnRemove.addEventListener("click", () => removeFromCart(index));

          qtyControls.appendChild(btnMinus);
          qtyControls.appendChild(qtySpan);
          qtyControls.appendChild(btnPlus);
          qtyControls.appendChild(btnRemove);

          li.appendChild(img);
          li.appendChild(infoDiv);
          li.appendChild(qtyControls);

          cartList.appendChild(li);
        });

        const total = cart.reduce((acc, cur) => acc + cur.price * cur.quantity, 0);
        cartTotal.textContent = formatPrice(total);

        if (total < 50) {
          cartBuyBtn.disabled = true;
          cartBuyBtn.title = "Pedido mínimo R$ 50,00";
        } else {
          cartBuyBtn.disabled = false;
          cartBuyBtn.title = "";
        }

        updateCartPreview();
      }

      // Change quantity in cart
      function changeQuantity(index, delta) {
        if (!cart[index]) return;
        cart[index].quantity += delta;
        if (cart[index].quantity < 1) {
          removeFromCart(index);
        } else {
          saveCart();
          renderCart();
        }
      }

      // Remove item from cart
      function removeFromCart(index) {
        if (!cart[index]) return;
        cart.splice(index, 1);
        saveCart();
        renderCart();
      }

      // Update cart preview bar
      function updateCartPreview() {
        const totalQty = cart.reduce((acc, cur) => acc + cur.quantity, 0);
        const totalPrice = cart.reduce((acc, cur) => acc + cur.price * cur.quantity, 0);
        cartPreviewQty.textContent = totalQty === 1 ? "1 item" : `${totalQty} itens`;
        cartPreviewTotal.textContent = formatPrice(totalPrice);
        if (totalQty > 0) {
          cartPreview.classList.add("show");
          cartClearSmallBtn.style.display = "inline-block";
        } else {
          cartPreview.classList.remove("show");
          cartClearSmallBtn.style.display = "none";
        }
      }

      // Toggle cart panel visibility
      function toggleCart() {
        const isOpen = cartPanel.classList.contains("open");
        if (isOpen) {
          cartPanel.classList.remove("open");
          cartPanel.setAttribute("aria-hidden", "true");
          cartCloseBtn.blur();
          cartPreviewButton.focus();
        } else {
          cartPanel.classList.add("open");
          cartPanel.setAttribute("aria-hidden", "false");
          setTimeout(() => {
            cartCloseBtn.focus();
          }, 100);
        }
      }

      // Show splash animation
      function showSplashAnimation(callback) {
        splashArt.style.display = "flex";
        splashArt.style.opacity = "1";
        splashArt.style.transform = "translate(-50%, -50%) scale(1)";
        setTimeout(() => {
          splashArt.style.opacity = "0";
          splashArt.style.transform = "translate(-50%, -50%) scale(0)";
          setTimeout(() => {
            splashArt.style.display = "none";
            if (typeof callback === "function") callback();
          }, 300);
        }, 1500);
      }

      // Show sending overlay
      function showSendingOverlay() {
        sendingOverlay.style.display = "flex";
        sendingOverlay.style.opacity = "1";
        sendingOverlay.style.pointerEvents = "auto";
      }

      // Hide sending overlay
      function hideSendingOverlay() {
        sendingOverlay.style.opacity = "0";
        sendingOverlay.style.pointerEvents = "none";
        setTimeout(() => {
          sendingOverlay.style.display = "none";
        }, 300);
      }

      // Handle category button click
      categoryButtons.forEach((btn) => {
        btn.addEventListener("click", () => {
          setCategoryFocus(btn);
          renderSizes(btn.dataset.category);
          renderProductList();
          // Reset form size selection to first option
          if (sizeSelect.options.length > 0) {
            sizeSelect.selectedIndex = 0;
          }
          // Reset quantity to 1
          orderForm.quantity.value = 1;
          // Reset name input
          orderForm.name.value = "";
          // Reset model selection to first
          orderForm.model[0].checked = true;
        });
      });

      // Initial render
      setCategoryFocus(categoryButtons[0]);
      renderSizes("adulto");
      renderProductList();

      // Handle form submission (add to cart)
      orderForm.addEventListener("submit", (e) => {
        e.preventDefault();
        const formData = new FormData(orderForm);
        const model = formData.get("model");
        const size = formData.get("size");
        const name = formData.get("name") ? formData.get("name").trim() : "";
        const quantity = parseInt(formData.get("quantity"), 10);

        if (!model || !size || !quantity || quantity < 1) {
          alert("Por favor, preencha todos os campos corretamente.");
          return;
        }

        // Get price from size option
        const selectedOption = sizeSelect.querySelector(`option[value="${size}"]`);
        if (!selectedOption) {
          alert("Tamanho inválido selecionado.");
          return;
        }
        const price = parseFloat(selectedOption.dataset.price);

        showSplashAnimation(() => {
          addToCart({ model, size, name, quantity, price });
        });
      });

      // Cart button events
      cartPreviewButton.addEventListener("click", toggleCart);
      cartClearSmallBtn.addEventListener("click", () => {
        cart = [];
        saveCart();
        renderCart();
      });
      cartCloseBtn.addEventListener("click", toggleCart);

      // Keyboard accessibility for cart panel
      cartPanel.addEventListener("keydown", (e) => {
        if (e.key === "Escape") {
          toggleCart();
          cartPreviewButton.focus();
        }
      });

      // Handle finalize purchase
      cartBuyBtn.addEventListener("click", () => {
        if (cart.length === 0) return;

        const total = cart.reduce((acc, cur) => acc + cur.price * cur.quantity, 0);
        if (total < 50) {
          alert("O pedido mínimo é R$ 50,00. Por favor, adicione mais itens.");
          return;
        }

        const ruaInput = document.getElementById("input-rua");
        const contatoInput = document.getElementById("input-contato");
        const obsInput = document.getElementById("input-observacoes");
        const rua = ruaInput ? ruaInput.value.trim() : "";
        const contato = contatoInput ? contatoInput.value.trim() : "";
        const observacoes = obsInput ? obsInput.value.trim() : "";

        if (contato && !/^\d{11}$/.test(contato)) {
          alert("Por favor, insira um telefone válido com 11 dígitos, ex: 67992321321.");
          contatoInput.focus();
          return;
        }

        showSendingOverlay();

        let message = "Quero esse pedido:\n";
        cart.forEach(({ model, size, name, quantity, price }) => {
          const nameText = name ? `, Nome: ${name}` : "";
          message += `*${model}* - Tamanho: ${size}${nameText} x${quantity} - R$ ${price.toFixed(2).replace(".", ",")}\n`;
        });
        message += `\nTotal: R$ ${total.toFixed(2).replace(".", ",")}`;
        if (rua) {
          message += `\nEndereço: ${rua}`;
        }
        if (contato) {
          message += `\nContato: ${contato}`;
        }
        if (observacoes) {
          message += `\nObservações: ${observacoes}`;
        }

        const encodedText = encodeURIComponent(message);

        setTimeout(() => {
          window.location.href = `https://wa.me/67999321890?text=${encodedText}`;
        }, 1500);
      });

      // Load cart on start
      loadCart();
      renderCart();

      // Spin animation for splash images
      const style = document.createElement("style");
      style.textContent = `
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `;
      document.head.appendChild(style);
    });
  </script>
 </body>
</html>
